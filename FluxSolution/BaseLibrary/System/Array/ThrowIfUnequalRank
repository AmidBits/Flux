namespace Flux
{
  public static partial class Fx
  {
    /// <summary>
    /// <para>Indicates whether <paramref name="source"/> is null or <paramref name="source"/>.Rank is unequal to <paramref name="rank"/>.</para>
    /// </summary>
    public static bool IsUnequalRank<T>(this System.Array source, int rank)
      => source is null || source.Rank != rank;

    /// <summary>
    /// <para>Throws an exception if <paramref name="source"/>.Rank is unequal to <paramref name="rank"/>.</para>
    /// </summary>
    public static void ThrowIfUnequalRank<T>(this System.Array source, int rank)
    {
      if(IsUnequalRank(source, rank))
      {
        System.ArgumentNullException.ThrowIfNull(source);

        throw new System.ArgumentException($"Invalid rank ({source.Rank} != {rank}).", nameof(source));
      }
    }
  }
}
